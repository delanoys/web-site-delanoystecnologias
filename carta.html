<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Para Ti, Mi Amor</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f8e1e7, #fdfbfb);
      color: #333;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      background-color: #e91e63;
      color: white;
      padding: 30px 20px;
    }

    .form-container {
      padding: 50px 20px;
    }

    input[type="password"] {
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      padding: 10px 20px;
      background-color: #e91e63;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 10px;
    }

    .content {
      padding: 40px 20px;
      max-width: 800px;
      margin: 0 auto;
      display: none;
      opacity: 0;
      animation: fadeIn 2s ease forwards;
    }

    img {
      max-width: 100%;
      border-radius: 10px;
      margin: 20px 0;
    }

    audio {
      margin-top: 30px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Para Ti, Mi Amor</h1>
    <p>Una carta desde lo profundo de mi alma</p>
  </header>

  <div class="form-container" id="form-container">
    <h2>Ingresa nuestro c√≥digo secreto</h2>
    <input type="password" id="codeInput" placeholder="C√≥digo secreto">
    <button onclick="checkCode()">Abrir carta</button>
  </div>

  <div class="content" id="loveLetter">

    <div class="slider-container">
      <div class="slider" id="slider">
        <img src="imagenes/carta/4249271_cf5c2.gif" alt="Amor 1" />
        <img src="imagenes/carta/artworks-000035196723-0nh4cx-t500x500.jpg" alt="Amor 2" />
        <img src="imagenes/carta/images (1).jpg" alt="Amor 3" />
        <img src="imagenes/carta/images (2).jpg" alt="Amor 4" />
        <img src="imagenes/carta/images.jpg" alt="Amor 5" />
      </div>
      <!-- <button class="slider-btn prev" onclick="moveSlide(-1)">&#10094;</button>
      <button class="slider-btn next" onclick="moveSlide(1)">&#10095;</button> -->
    </div>
    <style>
      .slider-container {
        position: relative;
        max-width: 600px;
        aspect-ratio: 1.3/1;
        margin: 30px auto 40px auto;
        overflow: hidden;
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(233,30,99,0.15);
        background: rgba(255,255,255,0.7);
      }
      .slider {
        display: flex;
        transition: transform 1s cubic-bezier(.77,0,.18,1);
        will-change: transform;
        height: 100%;
      }
      .slider img {
        min-width: 100%;
        height: 100%;
        object-fit: contain;
        filter: brightness(0.98) saturate(1.15) blur(0.2px) drop-shadow(0 0 10px #e91e63aa);
        transition: filter 0.7s, transform 0.5s cubic-bezier(.77,0,.18,1);
        border-radius: 15px;
        cursor: pointer;
      }
      .slider img:hover {
        filter: brightness(1.05) saturate(1.3) blur(0px) drop-shadow(0 0 20px #e91e63cc);
        transform: scale(1.13);
        z-index: 3;
      }
      .slider-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(233,30,99,0.7);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 38px;
        height: 38px;
        font-size: 1.5rem;
        cursor: pointer;
        z-index: 2;
        box-shadow: 0 2px 8px #e91e6340;
        transition: background 0.3s;
      }
      .slider-btn:hover {
        background: #e91e63;
      }
      .slider-btn.prev { left: 10px; }
      .slider-btn.next { right: 10px; }
    </style>
    <script>
      let currentSlide = 0;
      const slider = document.getElementById('slider');
      const slides = slider.children;
      const totalSlides = slides.length;

      function showSlide(index) {
        currentSlide = (index + totalSlides) % totalSlides;
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      }

      function moveSlide(step) {
        showSlide(currentSlide + step);
      }

      // Auto-slide every 3 seconds
      let autoSlide = setInterval(() => moveSlide(1), 3000);

      // Pause on hover (container)
      slider.parentElement.addEventListener('mouseenter', () => clearInterval(autoSlide));
      slider.parentElement.addEventListener('mouseleave', () => {
        autoSlide = setInterval(() => moveSlide(1), 3000);
      });

      // Initialize
      showSlide(0);
    </script>
    <script>
      let currentSlide = 0;
      const slider = document.getElementById('slider');
      const slides = slider.children;
      const totalSlides = slides.length;

      function showSlide(index) {
        currentSlide = (index + totalSlides) % totalSlides;
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      }

      function moveSlide(step) {
        showSlide(currentSlide + step);
      }

      // Auto-slide every 4 seconds
      let autoSlide = setInterval(() => moveSlide(1), 4000);

      // Pause on hover
      slider.parentElement.addEventListener('mouseenter', () => clearInterval(autoSlide));
      slider.parentElement.addEventListener('mouseleave', () => {
        autoSlide = setInterval(() => moveSlide(1), 4000);
      });

      // Initialize
      showSlide(0);
    </script>

    <div id="letterText" style="background: linear-gradient(135deg, #e91e63 0%, #e6023f 100%); padding: 30px 20px; border-radius: 15px; box-shadow: 0 4px 24px #e91e6330; margin-bottom: 30px; font-size: 1.375rem; min-height: 350px; background-color: rgba(233,30,99,0.22); background-blend-mode: lighten;">
        <p style="font-style: italic; color: #fffcfc; text-shadow: 0 1px 12px #e91e6380;">‚ÄúPuestos los ojos en Jes√∫s, el autor y consumador de la fe.‚Äù ‚Äì Hebreos 12:2</p>
        <div id="animatedLetter" style="text-align: left; line-height: 1.7; color: #fff; text-shadow: 0 1px 8px #e91e6380;"></div>
    </div>
    <script>
        // Texto de la carta
        const letterText = `Mi amor,

    No s√© si estas palabras lleguen en el mejor momento, pero necesitaba escribirte desde lo m√°s profundo de mi coraz√≥n. No para convencerte, sino para decirte con sinceridad cu√°nto te amo, cu√°nto reconozco mis errores y cu√°nto anhelo que Dios nos d√© una nueva oportunidad.

    S√© que he fallado. S√© que hemos vivido momentos dolorosos. Y tambi√©n s√© que t√∫ llevaste cargas pesadas. Muchas veces no supe amarte como merec√≠as. Luch√© con heridas del pasado, con mi salud, con mis deseos, con el pecado, con la frustraci√≥n de no poder liderar mi hogar como so√±√©. Y aun as√≠, t√∫ seguiste luchando... hasta que te cansaste.

    Hoy no te escribo para reclamarte nada. Al contrario, te doy gracias por todo lo que diste. Por las veces que estuviste, por las veces que diste m√°s de lo que pod√≠as. Hoy, con l√°grimas en los ojos, te digo: te amo. Y si a√∫n queda algo en tu coraz√≥n, aunque sea una chispa, te pido que no dejemos esto sin pelear al menos una vez m√°s ‚Äîpero ahora con Dios como el centro.

    Quiero reconstruir, restaurar, y renacer. No te obligo a quedarte, pero te ruego que pongas esta historia en las manos del Autor de la fe. Jes√∫s puede hacer lo que yo no he podido. Puede sanar nuestras heridas, restaurar nuestra intimidad, y volver a encender el amor que un d√≠a nos uni√≥.

    Gracias por ser mi compa√±era, la madre de nuestras hijas, y por tantos momentos vividos. Te perdono, te pido perd√≥n, y te amo en libertad.

    Con esperanza en Dios,
    Tu esposo üíñ`;

        // Divide el texto en palabras y mantiene los saltos de l√≠nea
        function splitTextWithLineBreaks(text) {
            const lines = text.split('\n');
            let words = [];
            lines.forEach((line, idx) => {
                if (line.trim() === "") {
                    words.push("<br><br>");
                } else {
                    const lineWords = line.split(' ');
                    lineWords.forEach((w, i) => {
                        words.push(w);
                        if (i < lineWords.length - 1) words.push(" "); // Agrega espacio entre palabras
                    });
                    if (idx < lines.length - 1) words.push("<br>");
                }
            });
            return words;
        }

        const words = splitTextWithLineBreaks(letterText);
        const container = document.getElementById('animatedLetter');
        let i = 0;

        function showNextWord() {
            if (i < words.length) {
                if (words[i] === "<br>") {
                    container.appendChild(document.createElement('br'));
                } else if (words[i] === "<br><br>") {
                    container.appendChild(document.createElement('br'));
                    container.appendChild(document.createElement('br'));
                } else if (words[i] === " ") {
                    container.appendChild(document.createTextNode(" "));
                } else {
                    // Crea un span para animar el tama√±o de la palabra
                    const span = document.createElement('span');
                    span.style.display = 'inline-block';
                    span.style.transition = 'transform 0.4s cubic-bezier(.77,0,.18,1)';
                    span.style.transform = 'scale(0.7)';
                    span.textContent = words[i];
                    container.appendChild(span);
                    setTimeout(() => {
                        span.style.transform = 'scale(1.15)';
                        setTimeout(() => {
                            span.style.transform = 'scale(1)';
                        }, 200);
                    }, 10);
                }
                i++;
                setTimeout(showNextWord, 70); // velocidad de aparici√≥n
            }
        }

        // Inicia la animaci√≥n cuando se muestra la carta
        function startLetterAnimation() {
            container.innerHTML = "";
            i = 0;
            showNextWord();
        }

        // Detecta cuando la carta se muestra
        const observer = new MutationObserver(() => {
            const letter = document.getElementById("loveLetter");
            if (letter && letter.style.display === "block") {
                startLetterAnimation();
                observer.disconnect();
            }
        });
        observer.observe(document.getElementById("loveLetter"), { attributes: true, attributeFilter: ['style'] });
    </script>

    <img src="imagenes/carta/Fe.png" alt="Esperanza y amor">

    <h3>üéµ Nuestra canci√≥n: Siempre en mi mente</h3>
    <audio id="loveAudio" controls autoplay>
      <source src="video/Juan Gabriel - Siempre en Mi Mente (Cover Audio).mp3" type="audio/mpeg">
      Tu navegador no soporta audio.
    </audio>
    <script>
      // Reproducir audio autom√°ticamente cuando se muestre la carta
      function playLoveAudio() {
        const audio = document.getElementById('loveAudio');
        if (audio) {
          audio.play().catch(() => {
            // Autoplay puede estar bloqueado por el navegador
          });
        }
      }
      // Llama a playLoveAudio cuando la carta se muestra
      const originalCheckCode = checkCode;
      window.checkCode = function() {
        originalCheckCode();
        setTimeout(playLoveAudio, 500);
      };
    </script>

    <p style="margin-top: 40px; color: red; font-size: larger;">Gracias por leer hasta el final. Esta p√°gina es para ti. Y si Dios toca tu coraz√≥n... a√∫n hay esperanza. üí´</p>
  </div>

  <script>
    function checkCode() {
      const code = document.getElementById("codeInput").value;
      const secret = "SandyDs18Parasiempre"; // Reemplaza por tu c√≥digo real

      if (code === secret) {
        document.getElementById("form-container").style.display = "none";
        const letter = document.getElementById("loveLetter");
        letter.style.display = "block";
        // Forzar animaci√≥n reiniciando offsetHeight
        void letter.offsetHeight;
        letter.style.animation = "fadeIn 2s ease forwards";
      } else {
        alert("C√≥digo incorrecto. Intenta de nuevo.");
      }
    }
  </script>

</body>
</html>
